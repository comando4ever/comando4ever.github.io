---
layout: post
title:  "إزّاي تجرّب hadoop باستخدام docker"
language: arabic
date: 2014-12-2 21:06:26 +0800
categories: arabic hadoop docker
url: "http://awdallah.tumblr.com/post/104174543050/%D8%A5%D8%B2-%D8%A7%D9%8A-%D8%AA%D8%AC%D8%B1-%D8%A8-hadoop-%D8%A8%D8%A7%D8%B3%D8%AA%D8%AE%D8%AF%D8%A7%D9%85-docker"
---

*ممكن تشوف البوست على [تمبلر](http://awdallah.tumblr.com/post/104174543050/%D8%A5%D8%B2-%D8%A7%D9%8A-%D8%AA%D8%AC%D8%B1-%D8%A8-hadoop-%D8%A8%D8%A7%D8%B3%D8%AA%D8%AE%D8%AF%D8%A7%D9%85-docker) أو [هنا]({{ site.baseurl }}{% post_url 2014-12-02-ar-try-hadoop-using-docker %})*

صباح الخير ومساء الخير , في الكُلية الترم ده بندرس كورس Big data وعشان نشتغل بيج داتا لازم نستخدم hadoop.

وﻷن hadoop صعب في تسطيبه خصوصًا لحد مبيستخدمش لينكس كتير أنا قررت أساهم في تقليل مُعاناة الناس اللي أعرفهم وأشرح إزّاي نستخدمه جوّة docker.

<blockquote class="ltr">
Hadoop is hard to set up, use, and maintain. [<a href="https://www.forbes.com/sites/danwoods/2012/07/27/how-to-avoid-a-hadoop-hangover/">*</a>]
</blockquote>

مش هشرح يعني إيه دوكر ﻷن ده موضوع تاني , لكن ببساطة دوكر هيوفّر التسطيب جاهز ع التشغيل على طول من غير تعب الـ installation والـ configuration اللي كُنّا هنعمله بإيدينا وده أكيد ﻷن حد تاني تعب وعمل الحاجات دي قبل كدة.
<!--description-->
كمان دوكر هيخلّي الموضوع أسهل إنّك تشيل hadoop تاني بسهولة برضو أو حتّى إنّك تشارك التعديلات بتاعتك مع الناس التانيين , ده في حالة لو كُنت إنت اللي بتشرح وعايز تشارك التعديلات بعد كُل خطوة.

المُهم , عشان نستخدم دوكر أكيد لازم نسطّبه , أنا هفترض إنّك بتستخدم أخر نُسخة من أوبنتو ﻷن أغلب اللي أعرفهم بيستخدم أخر نُسخة من أوبنتو.

عشان تسطّب دوكر هتكتب الأمر ده في الترمينال عشان:

```bash
sudo apt-get update
```
وبعدين تكتب باسوردك وبعدين تكتب الأمر ده:

```bash
sudo apt-get install docker.io
```

دلوقتي إنت عندك دوكر عشان تستخدمه هتقفل الأوّل الترمينال وبعدين تفتحها تاني وبعدين تكتب الأمر ده عشان تشوف التسطيب خلص بنجاح ولّا ﻷ:

```bash
sudo docker version
```
لو شغّال هيطبعلك كلام زي ده

![]({{site.baseurl}}/assets/img/posts/haddoc1/1.png)

بعد كدة هتكتب الأمر ده عشان تسطّب الـ image الخاصة بالهادوب:

```bash
sudo docker pull sequenceiq/hadoop-ubuntu:2.5.2
```

دلوقتي هو هيبدأ ينزّل hadoop بكُل الحاجات اللي هو محتاجها عشان يشتغل فالخطوة هتاخُد وقت على حسب النت بتاعك بس مُتوقّع إنّك تشوف حاجة شبه كدة طول ماهو شغّال بتبطّل لمّا التسطيب يخلص.

![]({{site.baseurl}}/assets/img/posts/haddoc1/2.png)

بعد ما يخلّص تحميل المفروض إنّك كدة خلّصت الخطوة اللي بتاخُد وقت بعد كدة هتدخُل عشان تستخدم بقى الإيمدج اللي نزلت , وده هيتم بالأمر ده:

```bash
sudo docker run -i -t sequenceiq/hadoop-ubuntu:2.5.2 /etc/bootstrap.sh -bash
```

هيقعد لوحده يعمل حاجات سيبه لحد ما يخلّص وهتلاقي حاجة شبه كدة :

![]({{site.baseurl}}/assets/img/posts/haddoc1/3.png)

كدة التسطيب إنتهى وتقدر تستخدم hadoop من هنا , لكن عشان نتأكّد هنستخدم مثال من اللي بيبقى مع البرنامج , عن طريق الأوامر دي:

```bash
cd $HADOOP_PREFIX
```

وبعدين ده , بالمُناسبة الأمر ده إستخدم كُل الرام والبروسيسور اللي على الجهاز عندي:

```bash
bin/hadoop jar share/hadoop/mapreduce/hadoop-mapreduce-examples-2.5.2.jar grep input output ‘dfs[a-z.]+’
```

هياخُد وقت طويل في الأخر هتكتب ده:

```bash
bin/hdfs dfs -cat output/*
```

لو كُل حاجة خلصت زي الفُل هتشوف حاجة زي كدة:

![]({{site.baseurl}}/assets/img/posts/haddoc1/4.png)

طبعًا حاجات لازم أنوّه عنها , ملفّات جهازك مش accessible على دوكر , ﻷن دوكر بيعمل sandbox عشان يشغّل عليه الإيمدج بتاعتك.

كمان nano/emacs مش موجودين بشكل إفتراضي مع الإيمدج المُستخدمة في دوكر فهتحتاج تنزّل أيًا كان الإيديتور اللي بتحبّه بالطريقة العادية وليكُن:

```bash
sudo apt-get install nano
```

مع العلم إن vi موجود بس هو في حد أعرفه بيستخدم vi!

أخيرًا عشان تقفل دوكر هتكتب exit وبعدين إنتر عادي هيقفل وهيرجع للأوبيريتنج سيستم بتاعك تاني.

أخيرًا عشان تشغّله تاني هتكتب الأمر ده:

```bash
sudo docker ps -a
```

هيظهر حاجة زي كدة :

![]({{site.baseurl}}/assets/img/posts/haddoc1/5.png)

هناخُد الرقم الغريب اللي تحت CONTAINER ID ده وبعدين هنستخدمه عشان نشغّل الكونتينر أو نمسحه أو حتّى نعمل إيمدج منّه عشان نشغّل الكونتينر تاني هنستخدم الأمر ده

```bash
sudo docker start -i 0d6ce9027b25
```

عشان نمسحه هنستخدم ده

```bash
sudo docker rm 0d6ce9027b25
```

هتغير 0d6ce9027b25 وتستخدم اللي ظهر ليك ﻷنّه بيختلف من مرّة لمرّة.

مع ذلك ده بيمسح الكونتينر مش الإيمدج نفسها لو عايز تمسح الإيمدج نفسها هتستخدم الأمر ده

```bash
sudo docker rmi sequenceiq/hadoop-ubuntu
```

ودُمتم سالمين.
